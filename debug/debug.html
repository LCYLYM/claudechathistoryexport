<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude助手调试工具 🔧</title>
    <link rel="stylesheet" href="debug.css">
</head>
<body>
    <div class="debug-container">
        <!-- 头部 -->
        <header class="debug-header">
            <div class="header-content">
                <h1 class="debug-title">
                    <span class="title-icon">🔧</span>
                    Claude助手调试工具
                </h1>
                <div class="debug-subtitle">诊断和调试插件状态</div>
            </div>
            <div class="header-actions">
                <button class="action-btn" id="refresh-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
                    </svg>
                    刷新数据
                </button>
                <button class="action-btn" id="export-debug-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                    </svg>
                    导出调试报告
                </button>
                <button class="action-btn" id="test-userids-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M11,14.5V19H13V14.5H11M11,5V12.5H13V5H11Z"/>
                    </svg>
                    测试用户ID
                </button>
            </div>
        </header>

        <!-- 主要内容 -->
        <main class="debug-main">
            <!-- 加载状态 -->
            <div class="loading-state" id="loading-state">
                <div class="loading-spinner"></div>
                <div class="loading-text">正在收集调试信息...</div>
            </div>

            <!-- 调试内容 -->
            <div class="debug-content" id="debug-content" style="display: none;">
                <!-- 系统状态 -->
                <section class="debug-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <span class="section-icon">🖥️</span>
                            系统状态
                        </h2>
                        <div class="status-indicator" id="system-status">
                            <span class="status-dot"></span>
                            <span class="status-text">检测中...</span>
                        </div>
                    </div>
                    <div class="section-content">
                        <div class="info-grid" id="system-info">
                            <!-- 动态生成 -->
                        </div>
                    </div>
                </section>

                <!-- 用户ID状态 -->
                <section class="debug-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <span class="section-icon">👤</span>
                            用户ID状态
                        </h2>
                        <div class="status-indicator" id="userid-status">
                            <span class="status-dot"></span>
                            <span class="status-text">检测中...</span>
                        </div>
                    </div>
                    <div class="section-content">
                        <div class="userid-list" id="userid-list">
                            <!-- 动态生成 -->
                        </div>
                        <div class="userid-actions">
                            <button class="test-btn" id="test-userid1">测试用户ID #1</button>
                            <button class="test-btn" id="test-userid2">测试用户ID #2</button>
                            <button class="test-btn" id="manual-userid">手动输入用户ID</button>
                        </div>
                    </div>
                </section>

                <!-- 存储状态 -->
                <section class="debug-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <span class="section-icon">💾</span>
                            存储状态
                        </h2>
                        <div class="status-indicator" id="storage-status">
                            <span class="status-dot"></span>
                            <span class="status-text">检测中...</span>
                        </div>
                    </div>
                    <div class="section-content">
                        <div class="storage-info" id="storage-info">
                            <!-- 动态生成 -->
                        </div>
                    </div>
                </section>

                <!-- 网络请求日志 -->
                <section class="debug-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <span class="section-icon">🌐</span>
                            网络请求日志
                        </h2>
                        <div class="section-actions">
                            <button class="clear-btn" id="clear-logs-btn">清空日志</button>
                        </div>
                    </div>
                    <div class="section-content">
                        <div class="logs-container" id="logs-container">
                            <div class="logs-empty">暂无网络请求日志</div>
                        </div>
                    </div>
                </section>

                <!-- 错误日志 -->
                <section class="debug-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <span class="section-icon">⚠️</span>
                            错误日志
                        </h2>
                        <div class="section-actions">
                            <button class="clear-btn" id="clear-errors-btn">清空错误</button>
                        </div>
                    </div>
                    <div class="section-content">
                        <div class="errors-container" id="errors-container">
                            <div class="errors-empty">暂无错误日志</div>
                        </div>
                    </div>
                </section>

                <!-- 性能指标 -->
                <section class="debug-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <span class="section-icon">📊</span>
                            性能指标
                        </h2>
                    </div>
                    <div class="section-content">
                        <div class="performance-grid" id="performance-grid">
                            <!-- 动态生成 -->
                        </div>
                    </div>
                </section>

                <!-- 实验性功能 -->
                <section class="debug-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <span class="section-icon">🧪</span>
                            实验性功能
                        </h2>
                    </div>
                    <div class="section-content">
                        <div class="experimental-features">
                            <div class="feature-item">
                                <label class="feature-label">
                                    <input type="checkbox" id="debug-mode">
                                    <span class="feature-name">调试模式</span>
                                    <span class="feature-desc">启用详细的控制台日志</span>
                                </label>
                            </div>
                            <div class="feature-item">
                                <label class="feature-label">
                                    <input type="checkbox" id="auto-export">
                                    <span class="feature-name">自动导出</span>
                                    <span class="feature-desc">自动保存每个对话</span>
                                </label>
                            </div>
                            <div class="feature-item">
                                <label class="feature-label">
                                    <input type="checkbox" id="enhanced-ui">
                                    <span class="feature-name">增强UI</span>
                                    <span class="feature-desc">启用实验性界面功能</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- 彩蛋区域 -->
        <div class="easter-egg-area" id="easter-egg-area" style="display: none;">
            <div class="fish-animation">
                <div class="fish">🐟</div>
                <div class="bubbles">
                    <div class="bubble"></div>
                    <div class="bubble"></div>
                    <div class="bubble"></div>
                </div>
            </div>
            <div class="easter-message">
                <h3>🎉 恭喜发现彩蛋！</h3>
                <p>感谢使用Claude对话助手！</p>
                <p>这个插件是用❤️制作的</p>
                <button class="close-easter" onclick="debugTool.hideEasterEgg()">关闭</button>
            </div>
        </div>
    </div>

    <!-- 用户ID测试模态框 -->
    <div class="modal" id="userid-test-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>用户ID测试</h3>
                <button class="modal-close" onclick="debugTool.closeModal()">×</button>
            </div>
            <div class="modal-body">
                <div class="test-form">
                    <label for="test-userid-input">输入用户ID:</label>
                    <input type="text" id="test-userid-input" placeholder="输入用户ID进行测试">
                    <div class="test-results" id="test-results" style="display: none;">
                        <!-- 测试结果 -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn secondary" onclick="debugTool.closeModal()">取消</button>
                <button class="modal-btn primary" id="run-test-btn">开始测试</button>
            </div>
        </div>
    </div>

    <script src="debug.js"></script>
</body>
</html>
